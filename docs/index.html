<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title> ‚ú® Teste | Fim de Ano √Årvore</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./style.css">
  <link rel="prefetch" href="./img/avatar_ali.png">
  <link rel="prefetch" href="./img/avatar_duda.png">
  <link rel="prefetch" href="./img/avatar_juca.png">
  <link rel="prefetch" href="./img/avatar_lili.png">
  <script src="https://unpkg.com/alpinejs" defer></script>
</head>

<body class="antialiased text-preto6 bg-gray-100">
  <div class="flex flex-col justify-center items-center h-screen bg-no-repeat bg-contain"
    x-data="{itens, passo: 0, resultado}">
    <div class="w-full max-w-xl p-3">
      <header class="flex flex-col text-center items-center break-words" x-ref="inicio" x-show="passo === 0 ">
        <h1 class="text-6xl font-bold text-livros">Fim de Ano na √Årvore</h1>
        <h2 class="text-4xl">Teste seu conhecimento sobre √Årvore e sobre o nosso ano de 2021!</h2>
        <img src="../src/img/perguntasQuiz.gif" class="my-8" alt="emojis variados que representam as perguntas" />
        <button x-on:click="$refs.inicio.remove(); passo++"
          class="text-white bg-livros hover:bg-ariel3 transition-all rounded font-bold py-3 px-4">Iniciar</button>
      </header>

      <template x-for="(item, i) in itens" :key="i">
        <section class="rounded-xl shadow overflow-hidden bg-gray-50" x-data="{ escolha: '' }" x-show="passo === i+1">
          <h2 class="text-xl font-bold m-2.5 p-4" x-text="item.pergunta"></h2>
          <div class="container-respostas px-4">
            <template x-for="resposta in item.respostas">
              <label class="opcao-resposta" :class="{ 'active': escolha === resposta.valor }">
                <input type="radio" :value="resposta.valor" x-model="escolha">
                <span x-text="resposta.texto"></span>
              </label>
            </template>
          </div>
          <div class="rodape-pergunta bg-gray-100 text-right mt-6 py-4 px-6 border-t border-solid border-gray-200">
            <button
              @click="$store.escolhas.listaDeEscolhas[i] = escolha; passo === 7 && (resultado = $store.escolhas.resultado()); passo++;"
              class="text-white bg-livros transition-all disabled:opacity-60 rounded font-bold py-3 px-4"
              :disabled="!escolha">Avan√ßar</button>
          </div>
        </section>
      </template>

      <section class="rounded-xl text-center shadow overflow-hidden bg-gray-50" x-show="passo === 8">
        <div class="py-4 px-6 border-t border-solid border-gray-200 flex justify-center"
          :style="`background-color: ${resultado.corFundo}`">
          <img :src="resultado.avatar" :style="`border-color: ${resultado.corBorda}`"
            class="border-8 shadow-md rounded-full h-48 w-48" alt="insignia com imagem do mascote">
        </div>
        <div class="p-4">
          <h2> voc√™ √© <span x-text="resultado.nome" class="font-extrabold px-2 text-2xl tracking-widest"
              :style="`background-color: ${resultado.corBorda}`"></span>
          </h2>
          <h3 class="italic my-5 text-gray-800"><span x-text="resultado.titulo" class="px-4"
              :style="`background-color: ${resultado.corBorda};`"></span></h3>
          <p x-text="resultado.bio"></p>
        </div>
      </section>
    </div>
  </div>

  <script>
    const itens = [
      {
        pergunta: 'Qual foi o primeiro convidado do ano nos nossos fechamentos? üíé',
        respostas: [
          { valor: 1, texto: 'Edu Lyra' },
          { valor: 0, texto: 'Monique Evelle' },
          { valor: 0, texto: 'Thiago Vinhal' },
          { valor: 0, texto: 'Gina Vieira' },
        ],
      },
      {
        pergunta: 'Qual foi o tema do primeiro Ra√≠zes de 2021? üå±',
        respostas: [
          { valor: 1, texto: 'LGBTQA+' },
          { valor: 0, texto: 'Gordofobia' },
          { valor: 0, texto: 'Parentalidade' },
          { valor: 0, texto: 'Capacitismo' },
        ],
      },
      {
        pergunta: 'Quantas Marianas ao todo temos na √Årvore? üíñ',
        respostas: [
          { valor: 1, texto: '9' },
          { valor: 0, texto: '10' },
          { valor: 0, texto: '5' },
          { valor: 0, texto: '12' },
        ],
      },
      {
        pergunta: 'Qual a √°rea que tem mais galhos e galhas? üå≥',
        respostas: [
          { valor: 1, texto: 'Comercial' },
          { valor: 0, texto: 'Comunica√ß√£o' },
          { valor: 0, texto: 'Engenharia' },
          { valor: 0, texto: 'Pedag√≥gico' },
        ],
      },
      {
        pergunta: 'Qauntos instrumentos o Gab Lima toca? üé∏',
        respostas: [
          { valor: 1, texto: '6' },
          { valor: 0, texto: 'Todos que existem' },
          { valor: 0, texto: '12' },
          { valor: 0, texto: '9' },
        ],
      },
      {
        pergunta: 'Qual foi o primeiro livro lido no nosso clube de leitura Entre Folhas? üìñ',
        respostas: [
          { valor: 1, texto: 'Ideias para adiar o fim do mundo' },
          { valor: 'a', texto: 'O sol √© para todos' },
          { valor: 'd', texto: 'As alegrias da maternidade' },
          { valor: 'b', texto: 'Sapiens' },
        ],
      },
      {
        pergunta: 'Onde fica a Arvore? üìç',
        respostas: [
          { valor: 1, texto: 'Rua Sacadura Cabral, 142' },
          { valor: 0, texto: ' 42 wallaby way' },
          { valor: 0, texto: 'Pra√ßa Mau√°, 1 - Centro' },
          { valor: 0, texto: ' R. Manuel Carneiro - Santa Teresa' },
        ],
      },
      {
        pergunta: 'Como se chamam os mascotes da √Årvore? üêæ',
        respostas: [
          { valor: 1, texto: '√Åli, Lili, Juca, Duda e Otto' },
          { valor: 0, texto: 'Otto, Curupaco, Lili, Pipo e Duda' },
          { valor: 0, texto: 'Lola, Lilica, Zaz√°, J√∫lio e Al√≠pio ' },
          { valor: 0, texto: '√Åli, Juca, Quiquinho, Duda e Otto' },
        ],
      },
      {
        pergunta: 'Quantos convidados fizeram parte do Conversas que Transformam 2021? ‚ú®',
        respostas: [
          { valor: 1, texto: '24' },
          { valor: 0, texto: '16' },
          { valor: 0, texto: '21' },
          { valor: 0, texto: '27' },
        ],
      },
      {
        pergunta: 'Completamos quantas edi√ß√µes em atualidades 2021? üì∞',
        respostas: [
          { valor: 1, texto: '8' },
          { valor: 0, texto: '11' },
          { valor: 0, texto: '6' },
          { valor: 0, texto: '10' },
        ],
      }
    ]

    const resultado = [
      {
        id: '1',
        nome: 'Sementinha',
        titulo: 'Sementinha',
        bio: 'Muito bem! ',
        avatar: '../src/img/lvl1r.png',
        corBorda: '#F58382',
        corFundo: '#FFE1A4',
      },
      {
        id: '2',
        nome: 'Broto',
        titulo: 'Do mundo da lua',
        bio: 'Duda √© o mascote mais rom√¢ntico e sonhador da turma. Sua esp√©cie √© a Soldadinho-do-araripe. Duda ama livros de romance e fica sonhando acordado enquanto l√™.',
        avatar: '../src/img/lvl2r.png',
        corBorda: '#D7EEFB',
        corFundo: '#F9E0D6',
      },
      {
        id: '3',
        nome: 'Caule',
        titulo: 'O antenado',
        bio: 'Juca √© meio atrapalhado e comil√£o. Sua esp√©cie √© a Anta-brasileira. Juca gosta de ler fic√ß√£o cient√≠fica, fantasia e hist√≥rias de super-her√≥is.',
        avatar: '../src/img/lvl3r.png',
        corBorda: '#FFE2A6',
        corFundo: '#F28180',
      },
      {
        id: '4',
        nome: 'Ramifica√ß√µes',
        titulo: 'A sabe tudo',
        bio: 'Lili √© a mais inteligente da turma. Ela √© muito tranquila e gentil. Sua esp√©cie √© a Tartaruga-oliva. Lili gosta dos grandes cl√°ssicos, adora ler jornais e biografias.',
        avatar: '../src/img/lvl4r.png',
        corBorda: '#84CCA7',
        corFundo: '#D6EFF9',
      },
      {
        id: '5',
        nome: 'Plantinha',
        titulo: 'A sabe tudo',
        bio: 'Lili √© a mais inteligente da turma. Ela √© muito tranquila e gentil. Sua esp√©cie √© a Tartaruga-oliva. Lili gosta dos grandes cl√°ssicos, adora ler jornais e biografias.',
        avatar: '../src/img/lvl5r.png',
        corBorda: '#84CCA7',
        corFundo: '#D6EFF9',
      },
    ]

    document.addEventListener('alpine:init', () => {
      Alpine.store('escolhas', {
        listaDeEscolhas: {},

        adicionar(i, escolha) {
          this.listaDeEscolhas[i] = escolha
        },

        resultado() {
          const listaLetras = Object.values(this.listaDeEscolhas);
          const quantidadeEscolhas = listaLetras.reduce((acumulador, letra) => {
            acumulador[letra] = acumulador[letra] + 1 || 1

            return acumulador
          }, {});

          const chavesObjetos = Object.keys(quantidadeEscolhas).sort(function (a, b) {
            return quantidadeEscolhas[b] - quantidadeEscolhas[a];
          })

          return resultado.filter(mascote => mascote.id === chavesObjetos[0])[0]
        },
      })
    })
  </script>
</body>

</html>
